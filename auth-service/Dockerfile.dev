FROM node:12.16.3

ARG NODE_ENV
ARG DB_PORT
ARG DB_HOST
ARG DB_NAME
ARG PORT
ARG REDIS_PORT
ARG REDIS_HOST
ARG JWT_SECRET
ARG REFRESH_SECRET

WORKDIR /usr/src/app
COPY package.json yarn.lock ./
RUN yarn

COPY . .

ENTRYPOINT [ "yarn", "start:dev" ]